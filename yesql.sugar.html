<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>yesql.sugar documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Yesql-sugar 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>yesql</span></div></div></li><li class="depth-2 current"><a href="yesql.sugar.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sugar</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="yesql.sugar.html#var-defqueries.2B"><div class="inner"><span>defqueries+</span></div></a></li><li class="depth-1"><a href="yesql.sugar.html#var-group"><div class="inner"><span>group</span></div></a></li><li class="depth-1"><a href="yesql.sugar.html#var-map-of"><div class="inner"><span>map-of</span></div></a></li><li class="depth-1"><a href="yesql.sugar.html#var-only"><div class="inner"><span>only</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">yesql.sugar</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-defqueries.2B"><h3>defqueries+</h3><h4 class="type">macro</h4><div class="usage"><code>(defqueries+ queries-file &amp; wrappers)</code></div><div class="doc"><div class="markdown"><p>Like <code>yesql.core/defqueries</code> this macro creates SQL query execution functions. The resulting functions will accept maps instead of positional parameters; additionally a post-processor can be given for each function that will be applied to the raw query result.</p><p><code>test.sql</code>:</p>
<pre><code>   -- name: test-query
   SELECT id FROM people
   WHERE age &lt; :max_age AND active = :active
</code></pre><p><code>test.clj</code>:</p>
<pre><code>  (require &#39;[yesql.sugar :refer :all])
  (defqueries+ &quot;sql/test.sql&quot;
    test-query (only :id))
</code></pre><p>This function can be called with a map of parameters and will return only a seq of IDs instead of maps of <code>{:id ...}</code>:</p>
<pre><code>  (test-query db-spec {:max_age 30 :active true})
  ;; =&gt; (123 456 ...)
</code></pre></div></div><div class="src-link"><a href="https://github.com/xsc/yesql-sugar/blob/master/src/yesql/sugar.clj#L109">view source</a></div></div><div class="public anchor" id="var-group"><h3>group</h3><div class="usage"><code>(group k)</code></div><div class="doc"><div class="markdown"><p>Create a map grouping the query results by the given key.</p></div></div><div class="src-link"><a href="https://github.com/xsc/yesql-sugar/blob/master/src/yesql/sugar.clj#L101">view source</a></div></div><div class="public anchor" id="var-map-of"><h3>map-of</h3><div class="usage"><code>(map-of k v)</code></div><div class="doc"><div class="markdown"><p>Create a map with the given fields as keys/values.</p></div></div><div class="src-link"><a href="https://github.com/xsc/yesql-sugar/blob/master/src/yesql/sugar.clj#L95">view source</a></div></div><div class="public anchor" id="var-only"><h3>only</h3><div class="usage"><code>(only k)</code></div><div class="doc"><div class="markdown"><p>Select only a single field from the results.</p></div></div><div class="src-link"><a href="https://github.com/xsc/yesql-sugar/blob/master/src/yesql/sugar.clj#L89">view source</a></div></div></div></body></html>